[{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isListening' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":31,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"isListening"},"fix":{"range":[987,999],"text":""},"desc":"Remove unused variable 'isListening'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  51 |     if (savedBg) {\n  52 |       try {\n> 53 |         setBgMedia(JSON.parse(savedBg));\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  54 |       } catch (e) {\n  55 |         console.error('Failed to load background:', e);\n  56 |       }","line":53,"column":9,"nodeType":null,"endLine":53,"endColumn":19}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport Header from './components/Header';\nimport Display from './components/Display';\nimport VoiceControl from './components/VoiceControl';\nimport Keypad from './components/Keypad';\nimport DateCalculator from './components/DateCalculator';\nimport { useCalculator } from './hooks/useCalculator';\nimport { useVoice } from './hooks/useVoice';\nimport './App.css'; // Ensure we import specific app styles if needed\n\nfunction App() {\n  const [isDark, setIsDark] = useState(true);\n  const [isScientific, setIsScientific] = useState(false);\n  const [isDateMode, setIsDateMode] = useState(false);\n  const [bgMedia, setBgMedia] = useState(null); // { type: 'image' | 'video', src: string }\n  const fileInputRef = useRef(null);\n\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n\n  const {\n    display,\n    append,\n    clear,\n    deleteLast,\n    calculate,\n    handleAction,\n    handleVoiceInput\n  } = useCalculator();\n\n  const {\n    isListening,\n    statusText,\n    startListening,\n    stopListening\n  } = useVoice((spoken) => {\n    handleVoiceInput(spoken);\n  });\n\n  useEffect(() => {\n    // Apply theme class to body\n    if (isDark) {\n      document.body.classList.add('dark-mode');\n    } else {\n      document.body.classList.remove('dark-mode');\n    }\n  }, [isDark]);\n\n  // Load background from localStorage on mount\n  useEffect(() => {\n    const savedBg = localStorage.getItem('bgMedia');\n    if (savedBg) {\n      try {\n        setBgMedia(JSON.parse(savedBg));\n      } catch (e) {\n        console.error('Failed to load background:', e);\n      }\n    }\n  }, []);\n\n  // Save background to localStorage when it changes\n  useEffect(() => {\n    if (bgMedia) {\n      localStorage.setItem('bgMedia', JSON.stringify(bgMedia));\n    } else {\n      localStorage.removeItem('bgMedia');\n    }\n  }, [bgMedia]);\n\n  // Handle keyboard input\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (isDateMode) return; // Disable calculator shortcuts in date mode\n\n      const key = e.key;\n      if (key === 'Enter') calculate();\n      else if (key === 'Backspace') deleteLast();\n      else if (key === 'Escape') clear();\n      else if (!isNaN(key) || [\"+\", \"-\", \"*\", \"/\", \".\", \"(\", \")\", \"%\", \"^\"].includes(key)) {\n        append(key);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [calculate, deleteLast, clear, append, isDateMode]);\n\n  const handleBgChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const fileURL = URL.createObjectURL(file);\n    if (file.type.startsWith('image/')) {\n      setBgMedia({ type: 'image', src: fileURL });\n    } else if (file.type.startsWith('video/')) {\n      setBgMedia({ type: 'video', src: fileURL });\n    }\n  };\n\n  const toggleSidebar = () => {\n    setIsSidebarOpen(!isSidebarOpen);\n  };\n\n  const [transitionClass, setTransitionClass] = useState('');\n\n  const triggerTransition = (callback) => {\n    setTransitionClass('view-exit');\n    setTimeout(() => {\n      callback();\n      setTransitionClass('view-enter-init');\n      // Small delay to ensure DOM update before removing class for animation\n      setTimeout(() => {\n        setTransitionClass('');\n      }, 50);\n    }, 320);\n  };\n\n  const switchMode = (mode) => {\n    if ((mode === 'date' && isDateMode) || (mode === 'std' && !isDateMode)) {\n      setIsSidebarOpen(false);\n      return;\n    }\n\n    triggerTransition(() => {\n      if (mode === 'date') {\n        setIsDateMode(true);\n      } else {\n        setIsDateMode(false);\n      }\n      setIsSidebarOpen(false);\n    });\n  };\n\n  const handleToggleScientific = () => {\n    triggerTransition(() => {\n      setIsScientific(!isScientific);\n    });\n  };\n\n  return (\n    <>\n      <div id=\"bg-container\">\n        {bgMedia?.type === 'image' && <img src={bgMedia.src} alt=\"Background\" />}\n        {bgMedia?.type === 'video' && (\n          <video src={bgMedia.src} autoPlay loop muted playsInline />\n        )}\n      </div>\n\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleBgChange}\n        accept=\"image/*,video/*\"\n        hidden\n      />\n      <div className={`container ${isScientific && !isDateMode ? 'scientific-mode' : ''}`}>\n        <div className={`sidebar ${isSidebarOpen ? 'open' : ''}`}>\n          <div className=\"sidebar-header\">\n            <h3>Menu</h3>\n            <button className=\"icon-btn\" onClick={toggleSidebar}>&times;</button>\n          </div>\n          <div className=\"sidebar-content\">\n            <button className=\"menu-item\" onClick={() => switchMode('history')}>History</button>\n            <button className=\"menu-item\" onClick={() => switchMode('date')}>Date Calculator</button>\n            <button\n              className=\"menu-item\"\n              onClick={() => {\n                fileInputRef.current?.click();\n                toggleSidebar();\n              }}\n            >\n              Change Background\n            </button>\n          </div>\n        </div>\n        <div\n          className={`overlay ${isSidebarOpen ? 'visible' : ''}`}\n          onClick={toggleSidebar}\n        ></div>\n\n        <Header\n          isScientific={isScientific}\n          onToggleMode={handleToggleScientific}\n          isDark={isDark}\n          onToggleTheme={() => setIsDark(!isDark)}\n          onToggleSidebar={toggleSidebar}\n          isDateMode={isDateMode}\n          onClose={() => switchMode('std')}\n        />\n\n        <div className={`view-transition ${transitionClass}`}>\n          {isDateMode ? (\n            <DateCalculator onClose={() => switchMode('std')} />\n          ) : (\n            <>\n              <Display value={display} />\n\n              <VoiceControl\n                onStart={startListening}\n                onStop={stopListening}\n                status={statusText}\n              />\n\n              <Keypad\n                isScientific={isScientific}\n                onInput={append}\n                onAction={handleAction}\n                onClear={clear}\n                onEqual={calculate}\n                onDelete={deleteLast}\n              />\n            </>\n          )}\n        </div>\n      </div >\n    </>\n  );\n}\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\DateCalculator.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`calculateDateDifference` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  24 |\n  25 |     useEffect(() => {\n> 26 |         calculateDateDifference();\n     |         ^^^^^^^^^^^^^^^^^^^^^^^ `calculateDateDifference` accessed before it is declared\n  27 |     }, [dateFrom, dateTo]);\n  28 |\n  29 |     const calculateDateDifference = () => {\n\n  27 |     }, [dateFrom, dateTo]);\n  28 |\n> 29 |     const calculateDateDifference = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |         if (!dateFrom || !dateTo || dateFrom.length < 8 || dateTo.length < 8) return;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 31 |\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 84 |         });\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 85 |     };\n     | ^^^^^^^ `calculateDateDifference` is declared here\n  86 |\n  87 |     const handleDateChange = (value, setter) => {\n  88 |         // Allow only numbers and hyphens","line":26,"column":9,"nodeType":null,"endLine":26,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateDateDifference'. Either include it or remove the dependency array.","line":27,"column":8,"nodeType":"ArrayExpression","endLine":27,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [calculateDateDifference, dateFrom, dateTo]","fix":{"range":[844,862],"text":"[calculateDateDifference, dateFrom, dateTo]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\n\r\nconst DateCalculator = () => {\r\n    const [dateFrom, setDateFrom] = useState('');\r\n    const [dateTo, setDateTo] = useState('');\r\n    const [results, setResults] = useState({\r\n        exact: 'Same dates',\r\n        days: '0 days',\r\n        weeks: '0 weeks, 0 days',\r\n        months: '0 months, 0 days',\r\n        business: '0 days'\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Set default dates to today (DD-MM-YYYY)\r\n        const now = new Date();\r\n        const d = String(now.getDate()).padStart(2, '0');\r\n        const m = String(now.getMonth() + 1).padStart(2, '0');\r\n        const y = now.getFullYear();\r\n        const today = `${d}-${m}-${y}`;\r\n        setDateFrom(today);\r\n        setDateTo(today);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        calculateDateDifference();\r\n    }, [dateFrom, dateTo]);\r\n\r\n    const calculateDateDifference = () => {\r\n        if (!dateFrom || !dateTo || dateFrom.length < 8 || dateTo.length < 8) return;\r\n\r\n        // Parse dates (DD-MM-YYYY)\r\n        const [d1_val, m1, y1] = dateFrom.split('-').map(Number);\r\n        const [d2_val, m2, y2] = dateTo.split('-').map(Number);\r\n\r\n        const d1 = new Date(y1, m1 - 1, d1_val);\r\n        const d2 = new Date(y2, m2 - 1, d2_val);\r\n\r\n        if (isNaN(d1.getTime()) || isNaN(d2.getTime())) return;\r\n\r\n        const start = d1 < d2 ? d1 : d2;\r\n        const end = d1 < d2 ? d2 : d1;\r\n\r\n        const totalTime = Math.abs(d2 - d1);\r\n        const totalDays = Math.round(totalTime / (1000 * 60 * 60 * 24));\r\n\r\n        let years = end.getFullYear() - start.getFullYear();\r\n        let months = end.getMonth() - start.getMonth();\r\n        let days = end.getDate() - start.getDate();\r\n\r\n        if (days < 0) {\r\n            months--;\r\n            const prevMonth = new Date(end.getFullYear(), end.getMonth(), 0);\r\n            days += prevMonth.getDate();\r\n        }\r\n        if (months < 0) {\r\n            years--;\r\n            months += 12;\r\n        }\r\n\r\n        const weeks = Math.floor(days / 7);\r\n        const remainingDays = days % 7;\r\n\r\n        let businessDays = 0;\r\n        let current = new Date(start);\r\n        while (current < end) {\r\n            current.setDate(current.getDate() + 1);\r\n            const day = current.getDay();\r\n            if (day !== 0 && day !== 6) {\r\n                businessDays++;\r\n            }\r\n        }\r\n\r\n        const totalWeeks = Math.floor(totalDays / 7);\r\n        const totalWeeksDays = totalDays % 7;\r\n        const totalMonths = (years * 12) + months;\r\n\r\n        setResults({\r\n            exact: `${years} years, ${months} months, ${weeks} weeks, ${remainingDays} days`,\r\n            days: `${totalDays} days`,\r\n            weeks: `${totalWeeks} weeks, ${totalWeeksDays} days`,\r\n            months: `${totalMonths} months, ${days} days`,\r\n            business: `${businessDays} days`\r\n        });\r\n    };\r\n\r\n    const handleDateChange = (value, setter) => {\r\n        // Allow only numbers and hyphens\r\n        if (!/^[0-9-]*$/.test(value)) return;\r\n\r\n        // Enforce max length\r\n        if (value.length > 10) return;\r\n\r\n        setter(value);\r\n    };\r\n\r\n    const handleCalendarChange = (e, setter) => {\r\n        const val = e.target.value; // YYYY-MM-DD\r\n        if (!val) return;\r\n        const [y, m, d] = val.split('-');\r\n        setter(`${d}-${m}-${y}`);\r\n    };\r\n\r\n    return (\r\n        <div id=\"date-calculator\" className=\"fade-in-slide\">\r\n            <div className=\"date-inputs\">\r\n                <div className=\"date-group\">\r\n                    <label>From (DD-MM-YYYY)</label>\r\n                    <div className=\"input-wrapper\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"DD-MM-YYYY\"\r\n                            value={dateFrom}\r\n                            onChange={(e) => handleDateChange(e.target.value, setDateFrom)}\r\n                            maxLength=\"10\"\r\n                        />\r\n                        <button className=\"calendar-btn\" onClick={() => document.getElementById('pickerFrom').showPicker()}>ðŸ“…</button>\r\n                        <input\r\n                            type=\"date\"\r\n                            id=\"pickerFrom\"\r\n                            className=\"hidden-picker\"\r\n                            onChange={(e) => handleCalendarChange(e, setDateFrom)}\r\n                            style={{ position: 'absolute', visibility: 'hidden', width: 0 }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"date-group\">\r\n                    <label>To (DD-MM-YYYY)</label>\r\n                    <div className=\"input-wrapper\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"DD-MM-YYYY\"\r\n                            value={dateTo}\r\n                            onChange={(e) => handleDateChange(e.target.value, setDateTo)}\r\n                            maxLength=\"10\"\r\n                        />\r\n                        <button className=\"calendar-btn\" onClick={() => document.getElementById('pickerTo').showPicker()}>ðŸ“…</button>\r\n                        <input\r\n                            type=\"date\"\r\n                            id=\"pickerTo\"\r\n                            className=\"hidden-picker\"\r\n                            onChange={(e) => handleCalendarChange(e, setDateTo)}\r\n                            style={{ position: 'absolute', visibility: 'hidden', width: 0 }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div className=\"date-results\">\r\n                <div className=\"result-item\">\r\n                    <span className=\"label\">Difference</span>\r\n                    <span className=\"value\">{results.exact || '-'}</span>\r\n                </div>\r\n                <div className=\"result-item\">\r\n                    <span className=\"label\">Total Days</span>\r\n                    <span className=\"value\">{results.days || '-'}</span>\r\n                </div>\r\n                <div className=\"result-item\">\r\n                    <span className=\"label\">Weeks</span>\r\n                    <span className=\"value\">{results.weeks || '-'}</span>\r\n                </div>\r\n                <div className=\"result-item\">\r\n                    <span className=\"label\">Months</span>\r\n                    <span className=\"value\">{results.months || '-'}</span>\r\n                </div>\r\n                <div className=\"result-item\">\r\n                    <span className=\"label\">Business Days</span>\r\n                    <span className=\"value\">{results.business || '-'}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DateCalculator;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\Display.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\Header.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\Keypad.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\ScientificKeys.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\StandardKeys.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'onDelete' is defined but never used.","line":3,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"onDelete"},"fix":{"range":[89,99],"text":""},"desc":"Remove unused variable 'onDelete'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nconst StandardKeys = ({ onInput, onAction, onClear, onEqual, onDelete }) => {\r\n    return (\r\n        <div className=\"std-keys\">\r\n            {/* Row 1 */}\r\n            <button className=\"btn\" id=\"percentBtn\" onClick={() => onAction('%')}>%</button>\r\n            <button className=\"btn\" id=\"sqrtBtn\" onClick={() => onAction('sqrt')}>âˆš</button>\r\n            <button className=\"btn\" id=\"squareBtn\" onClick={() => onAction('square')}>xÂ²</button>\r\n            <button className=\"btn operator\" onClick={() => onInput('/')}>Ã·</button>\r\n\r\n            {/* Row 2 */}\r\n            <button className=\"btn\" onClick={() => onInput('7')}>7</button>\r\n            <button className=\"btn\" onClick={() => onInput('8')}>8</button>\r\n            <button className=\"btn\" onClick={() => onInput('9')}>9</button>\r\n            <button className=\"btn operator\" onClick={() => onInput('*')}>Ã—</button>\r\n\r\n            {/* Row 3 */}\r\n            <button className=\"btn\" onClick={() => onInput('4')}>4</button>\r\n            <button className=\"btn\" onClick={() => onInput('5')}>5</button>\r\n            <button className=\"btn\" onClick={() => onInput('6')}>6</button>\r\n            <button className=\"btn operator\" onClick={() => onInput('-')}>âˆ’</button>\r\n\r\n            {/* Row 4 */}\r\n            <button className=\"btn\" onClick={() => onInput('1')}>1</button>\r\n            <button className=\"btn\" onClick={() => onInput('2')}>2</button>\r\n            <button className=\"btn\" onClick={() => onInput('3')}>3</button>\r\n            <button className=\"btn operator\" onClick={() => onInput('+')}>+</button>\r\n\r\n            {/* Row 5 */}\r\n            <button className=\"btn\" onClick={() => onInput('0')}>0</button>\r\n            <button className=\"btn\" onClick={() => onInput('.')}>.</button>\r\n            <button className=\"btn clear\" id=\"clearBtn\" onClick={onClear}>AC</button>\r\n            <button className=\"btn equal\" onClick={onEqual}>=</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StandardKeys;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\components\\VoiceControl.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\hooks\\useCalculator.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[17,28],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-eval').","line":230,"column":13,"severity":1,"nodeType":null,"fix":{"range":[7958,7993],"text":" "}},{"ruleId":"react-hooks/unsupported-syntax","severity":1,"message":"Compilation Skipped: The 'eval' function is not supported\n\nEval is an anti-pattern in JavaScript, and the code executed cannot be evaluated by React Compiler.\n\n  229 |             const prepared = prepareExpressionForEval(expr);\n  230 |             // eslint-disable-next-line no-eval\n> 231 |             return eval(prepared);\n      |                    ^^^^ The 'eval' function is not supported\n  232 |         } catch (e) {\n  233 |             throw new Error('Invalid Expression');\n  234 |         }\n\n","line":231,"column":20,"nodeType":null,"endLine":231,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":232,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":232,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":269,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":269,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":355,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":355,"endColumn":19},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":397,"column":25,"nodeType":"BlockStatement","messageId":"unexpected","endLine":397,"endColumn":28,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[14519,14520],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState, useEffect } from 'react';\r\nimport { solveMathProblem } from '../services/gemini';\r\n\r\n// Number to Words Conversion for Voice Output\r\nfunction numberToWords(num) {\r\n    if (isNaN(num)) return \"error\";\r\n    if (!isFinite(num)) return \"infinity\";\r\n\r\n    const a = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];\r\n    const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];\r\n    const g = ['', 'thousand', 'million', 'billion', 'trillion', 'quadrillion'];\r\n\r\n    const convertGroup = (n) => {\r\n        let str = '';\r\n        if (n >= 100) {\r\n            str += a[Math.floor(n / 100)] + ' hundred ';\r\n            n %= 100;\r\n        }\r\n        if (n >= 20) {\r\n            str += b[Math.floor(n / 10)] + (n % 10 ? '-' + a[n % 10] : '') + ' ';\r\n        } else if (n > 0) {\r\n            str += a[n] + ' ';\r\n        }\r\n        return str.trim();\r\n    };\r\n\r\n    let str = '';\r\n    if (num < 0) {\r\n        str += 'negative ';\r\n        num = Math.abs(num);\r\n    }\r\n\r\n    // Handle integer part\r\n    let parts = num.toString().split('.');\r\n    let integerPart = parseInt(parts[0]);\r\n    let decimalPart = parts[1];\r\n\r\n    if (integerPart === 0) {\r\n        str += 'zero';\r\n    } else {\r\n        let i = 0;\r\n        let tempStr = '';\r\n        while (integerPart > 0) {\r\n            let chunk = integerPart % 1000;\r\n            if (chunk > 0) {\r\n                tempStr = convertGroup(chunk) + (g[i] ? ' ' + g[i] : '') + ' ' + tempStr;\r\n            }\r\n            integerPart = Math.floor(integerPart / 1000);\r\n            i++;\r\n        }\r\n        str += tempStr.trim();\r\n    }\r\n\r\n    // Handle decimal part\r\n    if (decimalPart) {\r\n        str += ' point';\r\n        const digits = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];\r\n        for (let char of decimalPart) {\r\n            if (digits[parseInt(char)]) {\r\n                str += ' ' + digits[parseInt(char)];\r\n            }\r\n        }\r\n    }\r\n\r\n    return str.trim();\r\n}\r\n\r\n// Speak Result Function\r\nfunction speakResult(resultText) {\r\n    if (!window.speechSynthesis) return;\r\n\r\n    // Cancel any currently playing speech to avoid overlap\r\n    window.speechSynthesis.cancel();\r\n\r\n    const num = parseFloat(resultText);\r\n    let spokenText = \"\";\r\n\r\n    if (resultText === 'Error' || isNaN(num)) {\r\n        spokenText = \"There was an error in the calculation.\";\r\n    } else {\r\n        spokenText = \"The answer is \" + numberToWords(num);\r\n    }\r\n\r\n    const utterance = new SpeechSynthesisUtterance(spokenText);\r\n\r\n    // Configure voice settings for \"warm, slightly playful\" tone\r\n    utterance.rate = 0.95; // Slightly slower for clarity\r\n    utterance.pitch = 1.1; // Slightly higher pitch can sound friendlier/warmer\r\n    utterance.volume = 1.0;\r\n\r\n    // Attempt to select a suitable voice\r\n    const voices = window.speechSynthesis.getVoices();\r\n    // Look for a high-quality English voice\r\n    const preferredVoice = voices.find(v =>\r\n        (v.name.includes(\"Google US English\") || v.name.includes(\"Samantha\") || v.name.includes(\"Female\")) && v.lang.startsWith(\"en\")\r\n    ) || voices.find(v => v.lang.startsWith(\"en\"));\r\n\r\n    if (preferredVoice) {\r\n        utterance.voice = preferredVoice;\r\n    }\r\n\r\n    // 0.3s delay before speaking\r\n    setTimeout(() => {\r\n        window.speechSynthesis.speak(utterance);\r\n    }, 300);\r\n}\r\n\r\n// Convert simple English number words to digits for voice input\r\nfunction wordsToDigits(text) {\r\n    if (!text || typeof text !== 'string') return text;\r\n    text = text.toLowerCase();\r\n\r\n    const small = {\r\n        'zero': 0, 'one': 1, 'two': 2, 'three': 3, 'four': 4, 'five': 5, 'six': 6, 'seven': 7, 'eight': 8, 'nine': 9,\r\n        'ten': 10, 'eleven': 11, 'twelve': 12, 'thirteen': 13, 'fourteen': 14, 'fifteen': 15, 'sixteen': 16,\r\n        'seventeen': 17, 'eighteen': 18, 'nineteen': 19\r\n    };\r\n    const tens = { 'twenty': 20, 'thirty': 30, 'forty': 40, 'fifty': 50, 'sixty': 60, 'seventy': 70, 'eighty': 80, 'ninety': 90 };\r\n\r\n    // handle combined tens like 'twenty five'\r\n    text = text.replace(/\\b(?:twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety)\\s+(?:one|two|three|four|five|six|seven|eight|nine)\\b/gi, (m) => {\r\n        const parts = m.split(/\\s+/);\r\n        return (tens[parts[0].toLowerCase()] + small[parts[1].toLowerCase()]);\r\n    });\r\n\r\n    // replace teens and single small words\r\n    for (let w in small) {\r\n        const re = new RegExp('\\\\b' + w + '\\\\b', 'gi');\r\n        text = text.replace(re, small[w]);\r\n    }\r\n    for (let w in tens) {\r\n        const re = new RegExp('\\\\b' + w + '\\\\b', 'gi');\r\n        text = text.replace(re, tens[w]);\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\nfunction processVoiceInput(spoken) {\r\n    spoken = spoken.toLowerCase();\r\n\r\n    // 1. Convert number words to digits first\r\n    spoken = wordsToDigits(spoken);\r\n\r\n    // 2. Operator Conversions\r\n    const conversions = {\r\n        \"plus\": \"+\",\r\n        \"minus\": \"-\",\r\n        \"times\": \"*\",\r\n        \"into\": \"*\",\r\n        \"multiply by\": \"*\",\r\n        \"multiplied by\": \"*\",\r\n        \"multiply\": \"*\",\r\n        \"divided by\": \"/\",\r\n        \"divide\": \"/\",\r\n        \"percent of\": \"%\",\r\n        \"percentages\": \"%\",\r\n        \"percent\": \"%\",\r\n        \"square root\": \"sqrt \",\r\n        \"root\": \"sqrt \",\r\n        \"to the power of\": \"^\",\r\n        \"power\": \"^\",\r\n        \"x\": \"*\"\r\n    };\r\n\r\n    const sortedKeys = Object.keys(conversions).sort((a, b) => b.length - a.length);\r\n\r\n    for (let word of sortedKeys) {\r\n        const escapedWord = word.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n        const regex = new RegExp(word.length === 1 ? `\\\\b${escapedWord}\\\\b` : escapedWord, 'gi');\r\n        spoken = spoken.replace(regex, conversions[word]);\r\n    }\r\n\r\n    // 3. Remove extra filler words\r\n    const extraWords = [\"calculate\", \"what is\", \"equals to\", \"equals\", \"answer\", \"please\", \"by\"];\r\n    extraWords.forEach(w => {\r\n        const regex = new RegExp(`\\\\b${w}\\\\b`, 'gi');\r\n        spoken = spoken.replace(regex, \"\");\r\n    });\r\n\r\n    // Normalize square phrases\r\n    spoken = spoken.replace(/\\b(?:square|squared|x2|x\\s*squared)\\b\\s*(?:of\\s*)?(\\d+(?:\\.\\d+)?)/gi, function (_, n) { return n + '**2'; });\r\n    spoken = spoken.replace(/(\\d+(?:\\.\\d?)?)\\s*\\b(?:square|squared|x2|x\\s*squared)\\b/gi, function (_, n) { return n + '**2'; });\r\n\r\n    // Normalize power phrases\r\n    spoken = spoken.replace(/(\\d+(?:\\.\\d+)?)\\s*(?:\\^|to the power of|power)\\s*(\\d+(?:\\.\\d+)?)/gi, function (_, base, exp) { return base + '^' + exp; });\r\n\r\n    // Normalize square root phrases\r\n    spoken = spoken.replace(/(square root|root|sqrt)\\s*(?:of\\s*)?(\\d+(?:\\.\\d+)?)/gi, function (_, word, n) { return 'sqrt' + n; });\r\n\r\n    return spoken;\r\n}\r\n\r\nexport function useCalculator() {\r\n    const [display, setDisplay] = useState('');\r\n    const [lastCalculated, setLastCalculated] = useState(false);\r\n\r\n    const append = (value) => {\r\n        if (lastCalculated && !isNaN(value)) {\r\n            setDisplay(value);\r\n            setLastCalculated(false);\r\n        } else {\r\n            setDisplay((prev) => prev + value);\r\n        }\r\n    };\r\n\r\n    const clear = () => {\r\n        setDisplay('');\r\n        setLastCalculated(false);\r\n    };\r\n\r\n    const deleteLast = () => {\r\n        setDisplay((prev) => {\r\n            if (!prev) return '';\r\n            const m = prev.match(/(.*?)(\\d+\\.?\\d*)$/);\r\n            return m ? m[1] : prev.slice(0, -1);\r\n        });\r\n    };\r\n\r\n    const prepareExpressionForEval = (expr) => {\r\n        expr = expr.replace(/\\^/g, '**');\r\n        expr = expr.replace(/(\\d+(?:\\.\\d+)?)%\\s*(?:of\\s*)?(\\d+(?:\\.\\d+)?)/g, '($2*($1/100))');\r\n        expr = expr.replace(/(\\d+(?:\\.\\d+)?)%/g, '($1/100)');\r\n        return expr;\r\n    };\r\n\r\n    const safeEval = (expr) => {\r\n        try {\r\n            const prepared = prepareExpressionForEval(expr);\r\n            // eslint-disable-next-line no-eval\r\n            return eval(prepared);\r\n        } catch (e) {\r\n            throw new Error('Invalid Expression');\r\n        }\r\n    };\r\n\r\n    const calculate = () => {\r\n        try {\r\n            let expr = display.trim();\r\n            // n^2 shortcut\r\n            if (/^(\\d+(?:\\.\\d+)?)\\^2$/.test(expr)) {\r\n                const n = Number(expr.match(/^(\\d+(?:\\.\\d+)?)\\^2$/)[1]);\r\n                const res = String(n * n);\r\n                setDisplay(res);\r\n                setLastCalculated(true);\r\n                speakResult(res);\r\n                return;\r\n            }\r\n            // sqrt shortcut\r\n            if (/^sqrt(\\d+(?:\\.\\d+)?)$/.test(expr)) {\r\n                const n = Number(expr.match(/^sqrt(\\d+(?:\\.\\d+)?)$/)[1]);\r\n                if (n < 0) {\r\n                    setDisplay('Error');\r\n                    speakResult('Error');\r\n                } else {\r\n                    const resVal = Math.sqrt(n);\r\n                    const res = Number.isInteger(resVal) ? String(resVal) : resVal.toFixed(6).replace(/\\.0+$/, '');\r\n                    setDisplay(res);\r\n                    speakResult(res);\r\n                }\r\n                setLastCalculated(true);\r\n                return;\r\n            }\r\n            const result = safeEval(expr);\r\n            const resStr = String(result);\r\n            setDisplay(resStr);\r\n            setLastCalculated(true);\r\n            speakResult(resStr);\r\n        } catch (e) {\r\n            setDisplay('Error');\r\n            speakResult('Error');\r\n        }\r\n    };\r\n\r\n    const handleAction = (action) => {\r\n        try {\r\n            const val = display;\r\n            const numVal = Number(safeEval(val || '0'));\r\n            let result;\r\n            switch (action) {\r\n                case '%': {\r\n                    const re = /(\\d+(?:\\.\\d+)?)\\s*([+\\-*/])\\s*(\\d+(?:\\.\\d+)?$)/;\r\n                    const m = re.exec(val);\r\n                    if (m && (m[2] === '+' || m[2] === '-')) {\r\n                        const A = parseFloat(m[1]);\r\n                        const op = m[2];\r\n                        const B = parseFloat(m[3]);\r\n                        const computed = (A * B) / 100;\r\n                        setDisplay(val.slice(0, m.index) + A + op + computed);\r\n                        return;\r\n                    }\r\n                    const m2 = val.match(/(.*?)(\\d+(?:\\.\\d+)?$)/);\r\n                    if (m2) {\r\n                        const prefix = m2[1];\r\n                        const lastNum = parseFloat(m2[2]);\r\n                        setDisplay(prefix + (lastNum / 100));\r\n                    }\r\n                    return;\r\n                }\r\n                case 'square':\r\n                    result = numVal * numVal;\r\n                    break;\r\n                case 'sqrt':\r\n                    if (numVal < 0) throw new Error();\r\n                    result = Math.sqrt(numVal);\r\n                    break;\r\n                case 'sin':\r\n                    result = Math.sin(numVal);\r\n                    break;\r\n                case 'cos':\r\n                    result = Math.cos(numVal);\r\n                    break;\r\n                case 'tan':\r\n                    result = Math.tan(numVal);\r\n                    break;\r\n                case 'asin':\r\n                    if (Math.abs(numVal) > 1) throw new Error();\r\n                    result = Math.asin(numVal);\r\n                    break;\r\n                case 'acos':\r\n                    if (Math.abs(numVal) > 1) throw new Error();\r\n                    result = Math.acos(numVal);\r\n                    break;\r\n                case 'atan':\r\n                    result = Math.atan(numVal);\r\n                    break;\r\n                case 'ln':\r\n                    if (numVal <= 0) throw new Error();\r\n                    result = Math.log(numVal);\r\n                    break;\r\n                case 'log':\r\n                    if (numVal <= 0) throw new Error();\r\n                    result = Math.log10(numVal);\r\n                    break;\r\n                case 'exp':\r\n                    result = Math.exp(numVal);\r\n                    break;\r\n                case '^':\r\n                    setDisplay((prev) => prev + '^');\r\n                    setLastCalculated(false);\r\n                    return;\r\n                case 'pi':\r\n                    setDisplay((prev) => prev + Math.PI.toString());\r\n                    setLastCalculated(false);\r\n                    return;\r\n                default:\r\n                    return;\r\n            }\r\n            if (result !== undefined) {\r\n                const formatted = Number.isInteger(result) ? String(result) : result.toFixed(10).replace(/\\.?0+$/, '');\r\n                setDisplay(formatted);\r\n                setLastCalculated(true);\r\n                speakResult(formatted);\r\n            }\r\n        } catch (e) {\r\n            setDisplay('Error');\r\n            speakResult('Error');\r\n        }\r\n    };\r\n\r\n    const handleVoiceInput = async (spoken) => {\r\n        try {\r\n            if (spoken === 'clear' || spoken === 'c') {\r\n                clear();\r\n                return;\r\n            }\r\n\r\n            // Process the spoken input using our new helper\r\n            const processed = processVoiceInput(spoken);\r\n\r\n            if (/^sqrt(\\d+(?:\\.\\d+)?)$/.test(processed)) {\r\n                const n = Number(processed.match(/^sqrt(\\d+(?:\\.\\d+)?)$/)[1]);\r\n                if (n < 0) {\r\n                    setDisplay('Error');\r\n                    speakResult('Error');\r\n                } else {\r\n                    const resVal = Math.sqrt(n);\r\n                    const res = Number.isInteger(resVal) ? String(resVal) : resVal.toFixed(6).replace(/\\.0+$/, '');\r\n                    setDisplay(res);\r\n                    speakResult(res);\r\n                }\r\n                setLastCalculated(true);\r\n                return;\r\n            }\r\n            // Check for series/sequence keywords or list-like patterns (multiple numbers separated by commas/spaces)\r\n            const isSeriesQuestion = /series|sequence|pattern|next|complete/i.test(spoken);\r\n            const isList = /^\\d+(?:[\\s,]+\\d+){2,}$/.test(spoken); // Matches \"2, 4, 8\" or \"2 4 8\"\r\n\r\n            if (!isSeriesQuestion && !isList) {\r\n                try {\r\n                    const result = safeEval(processed);\r\n                    const resStr = String(result);\r\n                    setDisplay(resStr);\r\n                    setLastCalculated(true);\r\n                    speakResult(resStr);\r\n                    return;\r\n                } catch { }\r\n            }\r\n            // If the spoken input looks like a series request, try to compute locally\r\n            if (isSeriesQuestion || isList) {\r\n                // Extract all numbers from the spoken string\r\n                const nums = spoken.match(/-?\\d+(?:\\.\\d+)?/g);\r\n                if (nums && nums.length >= 2) {\r\n                    const numbers = nums.map(Number);\r\n                    // Try geometric progression detection\r\n                    const ratio = numbers[1] / numbers[0];\r\n                    const isGeo = numbers.every((v, i) => i === 0 || Math.abs(v / numbers[i - 1] - ratio) < 1e-6);\r\n                    if (isGeo) {\r\n                        const next = numbers[numbers.length - 1] * ratio;\r\n                        const resStr = String(next);\r\n                        setDisplay(resStr);\r\n                        setLastCalculated(true);\r\n                        speakResult(resStr);\r\n                        return;\r\n                    }\r\n                    // Try arithmetic progression detection\r\n                    const diff = numbers[1] - numbers[0];\r\n                    const isArith = numbers.every((v, i) => i === 0 || Math.abs(v - numbers[i - 1] - diff) < 1e-6);\r\n                    if (isArith) {\r\n                        const next = numbers[numbers.length - 1] + diff;\r\n                        const resStr = String(next);\r\n                        setDisplay(resStr);\r\n                        setLastCalculated(true);\r\n                        speakResult(resStr);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            setDisplay('Thinking...');\r\n            try {\r\n                const aiResult = await solveMathProblem(spoken);\r\n                const matches = aiResult.match(/-?\\d+(?:\\.\\d+)?/g);\r\n                const finalResult = matches ? matches[matches.length - 1] : aiResult.trim();\r\n                setDisplay(finalResult);\r\n                setLastCalculated(true);\r\n                speakResult(finalResult);\r\n            } catch (aiError) {\r\n                console.error(\"AI Error caught in hook:\", aiError);\r\n                if (aiError.message.includes('API Key')) {\r\n                    setDisplay('Set API Key');\r\n                } else {\r\n                    // Display a short error message to help debug\r\n                    setDisplay('Err: ' + aiError.message.substring(0, 8));\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"General Error:\", e);\r\n            setDisplay('Error');\r\n            setLastCalculated(false);\r\n            speakResult('Error');\r\n        }\r\n    };\r\n\r\n    return {\r\n        display,\r\n        setDisplay,\r\n        append,\r\n        clear,\r\n        deleteLast,\r\n        calculate,\r\n        handleAction,\r\n        handleVoiceInput,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\hooks\\useVoice.js","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`processVoiceInput` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  30 |                 let spoken = event.results[0][0].transcript.toLowerCase();\n  31 |                 setStatusText(\"You said: \" + spoken);\n> 32 |                 processVoiceInput(spoken);\n     |                 ^^^^^^^^^^^^^^^^^ `processVoiceInput` accessed before it is declared\n  33 |             };\n  34 |         } else {\n  35 |             setStatusText(\"Voice input not supported in this browser.\");\n\n  37 |     }, []);\n  38 |\n> 39 |     const processVoiceInput = (spoken) => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 40 |         const conversions = {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 41 |             \"plus\": \"+\",\n     â€¦\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 79 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 80 |     };\n     | ^^^^^^^ `processVoiceInput` is declared here\n  81 |\n  82 |     const startListening = () => {\n  83 |         if (recognitionRef.current) {","line":32,"column":17,"nodeType":null,"endLine":32,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\n\r\nexport function useVoice(onInput) {\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [statusText, setStatusText] = useState(\"\");\r\n    const recognitionRef = useRef(null);\r\n    const onInputRef = useRef(onInput);\r\n\r\n    useEffect(() => {\r\n        onInputRef.current = onInput;\r\n    }, [onInput]);\r\n\r\n    useEffect(() => {\r\n        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n        if (SpeechRecognition) {\r\n            recognitionRef.current = new SpeechRecognition();\r\n            recognitionRef.current.lang = \"en-US\";\r\n\r\n            recognitionRef.current.onstart = () => {\r\n                setIsListening(true);\r\n                setStatusText(\"Listening...\");\r\n            };\r\n\r\n            recognitionRef.current.onend = () => {\r\n                setIsListening(false);\r\n                setStatusText(\"Stopped listening.\");\r\n            };\r\n\r\n            recognitionRef.current.onresult = (event) => {\r\n                let spoken = event.results[0][0].transcript.toLowerCase();\r\n                setStatusText(\"You said: \" + spoken);\r\n                processVoiceInput(spoken);\r\n            };\r\n        } else {\r\n            setStatusText(\"Voice input not supported in this browser.\");\r\n        }\r\n    }, []);\r\n\r\n    const processVoiceInput = (spoken) => {\r\n        const conversions = {\r\n            \"plus\": \"+\",\r\n            \"minus\": \"-\",\r\n            \"times\": \"*\",\r\n            \"into\": \"*\",\r\n            \"multiply\": \"*\",\r\n            \"multiplied by\": \"*\",\r\n            \"divide\": \"/\",\r\n            \"divided by\": \"/\",\r\n            \"percent\": \"%\",\r\n            \"percent of\": \"%\",\r\n            \"percentages\": \"%\",\r\n            \"square root\": \"sqrt \",\r\n            \"root\": \"sqrt \",\r\n            \"to the power of\": \"^\",\r\n            \"power\": \"^\"\r\n        };\r\n\r\n        for (let word in conversions) {\r\n            spoken = spoken.replaceAll(word, conversions[word]);\r\n        }\r\n\r\n        const extraWords = [\"calculate\", \"what is\", \"equals to\", \"equals\", \"answer\", \"please\"];\r\n        extraWords.forEach(w => spoken = spoken.replaceAll(w, \"\"));\r\n\r\n        spoken = wordsToDigits(spoken);\r\n\r\n        // Normalize square phrases\r\n        spoken = spoken.replace(/\\b(?:square|squared|x2|x\\s*squared)\\b\\s*(?:of\\s*)?(\\d+(?:\\.\\d+)?)/gi, (_, n) => n + '**2');\r\n        spoken = spoken.replace(/(\\d+(?:\\.\\d?)?)\\s*\\b(?:square|squared|x2|x\\s*squared)\\b/gi, (_, n) => n + '**2');\r\n\r\n        // Normalize power phrases\r\n        spoken = spoken.replace(/(\\d+(?:\\.\\d+)?)\\s*(?:\\^|to the power of|power)\\s*(\\d+(?:\\.\\d+)?)/gi, (_, base, exp) => base + '^' + exp);\r\n\r\n        // Normalize square root phrases\r\n        spoken = spoken.replace(/(square root|root|sqrt)\\s*(?:of\\s*)?(\\d+(?:\\.\\d+)?)/gi, (_, word, n) => 'sqrt' + n);\r\n\r\n        if (onInputRef.current) {\r\n            onInputRef.current(spoken);\r\n        }\r\n    };\r\n\r\n    const startListening = () => {\r\n        if (recognitionRef.current) {\r\n            try {\r\n                recognitionRef.current.start();\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const stopListening = () => {\r\n        if (recognitionRef.current) {\r\n            recognitionRef.current.abort();\r\n            setIsListening(false);\r\n            setStatusText(\"Stopped listening.\");\r\n        }\r\n    };\r\n\r\n    return {\r\n        isListening,\r\n        statusText,\r\n        startListening,\r\n        stopListening\r\n    };\r\n}\r\n\r\nfunction wordsToDigits(text) {\r\n    if (!text || typeof text !== 'string') return text;\r\n    text = text.toLowerCase();\r\n\r\n    const small = {\r\n        'zero': 0, 'one': 1, 'two': 2, 'three': 3, 'four': 4, 'five': 5, 'six': 6, 'seven': 7, 'eight': 8, 'nine': 9,\r\n        'ten': 10, 'eleven': 11, 'twelve': 12, 'thirteen': 13, 'fourteen': 14, 'fifteen': 15, 'sixteen': 16,\r\n        'seventeen': 17, 'eighteen': 18, 'nineteen': 19\r\n    };\r\n    const tens = { 'twenty': 20, 'thirty': 30, 'forty': 40, 'fifty': 50, 'sixty': 60, 'seventy': 70, 'eighty': 80, 'ninety': 90 };\r\n\r\n    text = text.replace(/\\b(?:twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety)\\s+(?:one|two|three|four|five|six|seven|eight|nine)\\b/gi, (m) => {\r\n        const parts = m.split(/\\s+/);\r\n        return (tens[parts[0].toLowerCase()] + small[parts[1].toLowerCase()]);\r\n    });\r\n\r\n    for (let w in small) {\r\n        const re = new RegExp('\\\\b' + w + '\\\\b', 'gi');\r\n        text = text.replace(re, small[w]);\r\n    }\r\n    for (let w in tens) {\r\n        const re = new RegExp('\\\\b' + w + '\\\\b', 'gi');\r\n        text = text.replace(re, tens[w]);\r\n    }\r\n\r\n    return text;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\src\\services\\gemini.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\New Projects\\New_Trial\\AI-Voice-Calculator\\react_app\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
